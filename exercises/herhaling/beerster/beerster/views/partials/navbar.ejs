<nav class="bg-blue-500 p-4">
    <div class="container mx-auto flex justify-between items-center">
        <ul class="flex gap-10">
            <li><a class="text-white hover:text-blue-200 font-semibold" href="/">Home</a></li>
            <li><a class="text-white hover:text-blue-200 font-semibold" href="/beers">Beers</a></li>
            <li><a class="text-white hover:text-blue-200 font-semibold" href="/bars">Bars</a></li>
        </ul>
        <div class="relative">
            <button class="cursor-pointer w-10 h-10 rounded-full bg-white flex items-center justify-center" popovertarget="profile-popover" popovertargetaction="toggle">
                <span class="text-blue-500 font-bold"><%= user.username.substring(0,1).toUpperCase() %></span>
            </button>
            <div id="profile-popover" class="popover hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-50">
                <ul>
                    <li><a class="block px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-md" href="/profile"><%= user.fullname %></a></li>
                    <li><a class="block px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-md" href="/logout">Logout</a></li>
                </ul>
            </div>
        </div>
    </div>
</nav>

<script>
document.addEventListener('click', (event) => {
    const targetButton = event.target.closest('[popovertarget]');
    const popoverId = targetButton?.getAttribute('popovertarget');
    if (popoverId) {
        const popover = document.getElementById(popoverId);
        if (popover) {
            popover.classList.toggle('hidden');
        }
    } else {
        document.querySelectorAll('.popover').forEach(popover => popover.classList.add('hidden'));
    }
});
</script>